{% extends "base.html" %}
{% load static %}
{% block content %}

<style type="text/css">
    @media (min-width: 1600px) {
        .user-name {
            padding: 0 10%;
        }
    }
</style>
<div class="content container-fluid">

    <div class="page-header">
        <div class="row align-items-center">
            <div class="col">
                <h3 class="page-title">Employees</h3>
                <ul class="breadcrumb">
                    <li class="breadcrumb-item"><a href="{% url 'admin-dashboard' %}">Dashboard</a></li>
                    <li class="breadcrumb-item active">Old Employees</li>
                </ul>
            </div>
            <div class="col-auto float-end ms-auto">
                <!-- <a href="#" class="btn add-btn" data-bs-toggle="modal" data-bs-target="#add_employee"><i class="fa-solid fa-plus"></i> Add Employee</a> -->
                <!-- <div class="view-icons">
                    <a href="#" class="grid-view btn btn-link active"><i class="fa fa-th"></i></a>
                    <a href="#" class="list-view btn btn-link"><i class="fa-solid fa-bars"></i></a>
                </div> -->
            </div>
        </div>
    </div>


    <div class="row filter-row">
        <div class="col-sm-6 col-md-3">
            <div class="input-block mb-3 form-focus select-focus">
                <select id="name-select" class="select floating">
                    <option>Select Name</option>
                    {% for employee in employee_list%}
                        {% if employee.first_name|length > 0 %}
                          <option value="{{ employee.id }}">{{ employee.first_name}} {{ employee.last_name}}</option>
                        {% else %}
                            <option value="{{ employee.id }}">{{ employee.user_name}}</option>
                        {% endif %}
                    {% endfor %}
                </select>
                <label class="focus-label">Employee Name</label>
            </div>
        </div>
        <div class="col-sm-6 col-md-3">
            <div class="input-block mb-3 form-focus select-focus">
                <select id="country-select" class="select floating">
                    <option>Select Country</option>
                    {% for country in unique_country_names %}
                        <option value="{{ country.id }}">{{ country.name }}</option>
                    {% endfor %}
                </select>
                <label class="focus-label">Country</label>
            </div>
        </div>
        <div class="col-sm-6 col-md-3">
            <div class="input-block mb-3 form-focus select-focus">
                <select id="designation-select" class="select floating">
                    <option>Select Designation</option>
                    {% for designation in unique_designations %}
                        <option>{{ designation }}</option>
                    {% endfor %}
                </select>
                <label class="focus-label">Designation</label>
            </div>
        </div>
        <div class="col-sm-6 col-md-3">
            <div class="d-grid">
                <a href="#" id="search-btn" class="btn btn-success w-100"> Search </a>
            </div>
        </div>
    </div>

    <div class="row staff-grid-row">
        {% for employee in employee_list %}
        <div class="col-md-4 col-sm-6 col-12 col-lg-4 col-xl-3">
            <div class="profile-widget">
                <div class="row filter-row">
                    <div class="col-md-7 col-sm-7 col-7 col-lg-7 col-xl-7">
                        <div class="profile-img">
                            <a href="{% url 'profile' employee.id %}" class="avatar">
                                {% if employee.image_url|length > 0 %}
                                    <img src="{{ employee.image_url }}" alt="User Image">
                                {% else %}
                                    <img src="{% static 'assets/img/user/dummy-profile-pic.jpg' %}" alt="Close Icon">
                                {% endif %}
                            </a>
                        </div>
                    </div>
                    <div class="col-md-4 col-sm-4 col-4 col-lg-4 col-xl-4" style="padding: 0px;margin-top: 10px">
                        {% if current_month in month_list %}
                            {% if employee.contracted_employee_info %}
                                <div class="text-muted">
                                    S: {{ employee.contracted_employee_info.support }}<br>
                                    M: {{ employee.contracted_employee_info.account_manager }}<br>
                                    A: {{ employee.contracted_employee_info.advisor }}
                                </div>
                            {% else %}
                                <div class="text-muted">
                                    S: 0<br>
                                    M: 0<br>
                                    A: 0
                                </div>
                            {% endif %}
                        {% else %}
                            {% if employee.contracted_employee_info %}
                                <div class="text-muted">
                                    C: {{ employee.contracted_employee_info.account_manager }}<br>
                                    B: {{ employee.contracted_employee_info.support }}<br>
                                    A: {{ employee.contracted_employee_info.advisor }}
                                </div>
                            {% else %}
                                <div class="text-muted">
                                    B: 0<br>
                                    C: 0<br>
                                    A: 0
                                </div>
                            {% endif %}
                        {% endif %}
                    </div>
                </div>
                <div class="dropdown profile-action">
                    <a href="#" class="action-icon dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false"><i class="material-icons">more_vert</i></a>
                    <div class="dropdown-menu dropdown-menu-right">
                        <!-- <a class="dropdown-item edit_employee" href="javascript:void(0)" id="{{ employee.id}}"><i class="fa-solid fa-pencil m-r-5"></i> Edit</a> -->
                        <!-- <a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#delete_employee"><i class="fa-regular fa-trash-can m-r-5"></i> Delete</a> -->
                        {% if user.is_authenticated %}
                                        {% if user.groups.all.0.name == 'admin' or request.user.id == 6 %}
                        <a class="dropdown-item move_employee" href="javascript:void(0)" id="{{ employee.id }}"><i class="fa-solid fa-arrow-alt-circle-right m-r-5"></i> Move</a>
                                  {% endif %}
                        {% endif %}
                    </div>
                </div>
                <h4 class="user-name m-t-10 mb-0 text-ellipsis" style="float: left;">
                    <a href="{% url 'profile' employee.id %}">
                        {% if employee.first_name|length > 0 %}
                            {{ employee.first_name}} {{ employee.last_name}}
                        {% else %}
                            {{ employee.user_name}}
                        {% endif %}
                    </a>

                </h4>
            </div>
        </div>
        {% endfor %}
    </div>




    <div id="add_employee" class="modal custom-modal fade" role="dialog">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Add Employee</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form action="{% url 'employees' %}" method="post">
                        {% csrf_token %}

                        <div class="row">
                            <div class="col-sm-6">
                                <div class="input-block mb-3">
                                    <label class="col-form-label">First Name <span class="text-danger">*</span></label>
                                    <input class="form-control" type="text" name="first_name">
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="input-block mb-3">
                                    <label class="col-form-label">Last Name</label>
                                    <input class="form-control" type="text"name="last_name">
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="input-block mb-3">
                                    <label class="col-form-label">Username <span class="text-danger">*</span></label>
                                    <input class="form-control" type="text" name="user_name">
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="input-block mb-3">
                                    <label class="col-form-label">Email <span class="text-danger">*</span></label>
                                    <input class="form-control" type="email" name="email">
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="input-block mb-3">
                                    <label class="col-form-label">Password<span class="text-danger">*</span></label>
                                    <input class="form-control" type="password"name="password">
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="input-block mb-3">
                                    <label class="col-form-label">Confirm Password<span class="text-danger">*</span></label>
                                    <input class="form-control" type="password" name="confirm_password">
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="input-block mb-3">
                                    <label class="col-form-label">Address <span class="text-danger">*</span></label>
                                    <input class="form-control" type="text" name="address">
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="input-block mb-3">
                                    <label class="col-form-label">Reports To <span class="text-danger">*</span></label>
                                    <input class="form-control" type="text" name="reports_to">
                                </div>
                            </div>

                            <div class="col-sm-6">
                                <div class="input-block mb-3">
                                    <label class="col-form-label">Date of Birth </label>
                                    <input type="date" class="form-control" name="doe" placeholder="YYYY-MM-DD">
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="input-block mb-3">
                                    <label class="col-form-label">Joining Date  <span class="text-danger">*</span></label>
                                    <input type="date" class="form-control" name="joining_date" placeholder="YYYY-MM-DD">

                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="input-block mb-3">
                                    <label class="col-form-label">Phone </label>
                                    <input class="form-control" type="text" name="phone">
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="input-block mb-3">
                                    <label class="col-form-label">Company</label>
                                    <select class="select" name="company">
                                        <option value="0">Select Company</option>
                                        <option value="1">EC Customers </option>
                                        <option value="2">Brickwin</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="input-block mb-3">
                                    <label class="col-form-label">Gender</label>
                                    <select class="select" name="gender">
                                        <option >Select Gender</option>
                                        <option >Male </option>
                                        <option >Female</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="input-block mb-3">
                                    <label class="col-form-label">Department <span class="text-danger">*</span></label>
                                    <select class="select" name="department">
                                        <option>Select Department</option>
                                        <option>Web Development</option>
                                        <option>IT Management</option>
                                        <option>Marketing</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="input-block mb-3">
                                    <label class="col-form-label">Designation <span class="text-danger">*</span></label>
                                    <select class="select" name="designation">
                                        <option>Select Designation</option>
                                        {% for employee in employee_list %}
                                        <option>{{ employee.designation }}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="submit-section">
                            <button type="submit" class="btn btn-primary submit-btn">Submit</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>




    <div id="edit_employee" class="modal custom-modal fade" role="dialog">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Edit Employee</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form name="update_employee" id="update_employee" method="post" enctype="multipart/form-data" action="{% url 'edit_employee' %}">
                        {% csrf_token %}
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="input-block mb-3">
                                    <label class="col-form-label">First Name <span class="text-danger">*</span></label>
                                    <input class="form-control" id="first_name" name="first_name" value="John" type="text">
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="input-block mb-3">
                                    <label class="col-form-label">Last Name</label>
                                    <input class="form-control" id="last_name" name="last_name" value="Doe" type="text">
                                </div>
                            </div>
                            <!-- <div class="col-sm-6">
                                <div class="input-block mb-3">
                                    <label class="col-form-label">Username <span class="text-danger">*</span></label>
                                    <input class="form-control" value="johndoe" type="text">
                                </div>
                            </div> -->
                            <div class="col-sm-6">
                                <div class="input-block mb-3">
                                    <label class="col-form-label">Email <span class="text-danger">*</span></label>
                                    <input class="form-control" id="personal_email" name="personal_email" value="johndoe@example.com" type="email">
                                </div>
                            </div>
                            <!-- <div class="col-sm-6">
                                <div class="input-block mb-3">
                                    <label class="col-form-label">Password</label>
                                    <input class="form-control" value="johndoe" type="password">
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="input-block mb-3">
                                    <label class="col-form-label">Confirm Password</label>
                                    <input class="form-control" value="johndoe" type="password">
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="input-block mb-3">
                                    <label class="col-form-label">Employee ID <span class="text-danger">*</span></label>
                                    <input type="text" value="FT-0001" readonly class="form-control floating">
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="input-block mb-3">
                                    <label class="col-form-label">Joining Date <span class="text-danger">*</span></label>
                                    <div class="cal-icon"><input class="form-control datetimepicker" type="text"></div>
                                </div>
                            </div> -->
                            <div class="col-sm-6">
                                <div class="input-block mb-3">
                                    <label class="col-form-label">Phone </label>
                                    <input class="form-control" id="phone" name="phone" value="9876543210" type="text">
                                </div>
                            </div>
                            <!-- <div class="col-sm-6">
                                <div class="input-block mb-3">
                                    <label class="col-form-label">Company</label>
                                    <select class="select">
                                        <option>Global Technologies</option>
                                        <option>Delta Infotech</option>
                                        <option selected>International Software Inc</option>
                                    </select>
                                </div>
                            </div> -->
                            <!-- <div class="col-md-6">
                                <div class="input-block mb-3">
                                    <label class="col-form-label">Department <span class="text-danger">*</span></label>
                                    <select class="select">
                                        <option>Select Department</option>
                                        <option>Web Development</option>
                                        <option>IT Management</option>
                                        <option>Marketing</option>
                                    </select>
                                </div>
                            </div> -->
                            <div class="col-md-6">
                                <div class="input-block mb-3">
                                    <label class="col-form-label">Designation <span class="text-danger">*</span></label>
                                    <select class="select" id="designation" name="designation">
                                        <option>Select Designation</option>
                                        <option>Web Designer</option>
                                        <option>Web Developer</option>
                                        <option>Android Developer</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <!-- <div class="table-responsive m-t-15">
                            <table class="table table-striped custom-table">
                                <thead>
                                    <tr>
                                        <th>Module Permission</th>
                                        <th class="text-center">Read</th>
                                        <th class="text-center">Write</th>
                                        <th class="text-center">Create</th>
                                        <th class="text-center">Delete</th>
                                        <th class="text-center">Import</th>
                                        <th class="text-center">Export</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Holidays</td>
                                        <td class="text-center">
                                            <label class="custom_check">
                                                <input type="checkbox" checked>
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                        <td class="text-center">
                                            <label class="custom_check">
                                                <input type="checkbox" name="rememberme" class="rememberme">
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                        <td class="text-center">
                                            <label class="custom_check">
                                                <input type="checkbox" name="rememberme" class="rememberme">
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                        <td class="text-center">
                                            <label class="custom_check">
                                                <input type="checkbox" name="rememberme" class="rememberme">
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                        <td class="text-center">
                                            <label class="custom_check">
                                                <input type="checkbox" name="rememberme" class="rememberme">
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                        <td class="text-center">
                                            <label class="custom_check">
                                                <input type="checkbox" name="rememberme" class="rememberme">
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Leaves</td>
                                        <td class="text-center">
                                            <label class="custom_check">
                                                <input type="checkbox" checked>
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                        <td class="text-center">
                                            <label class="custom_check">
                                                <input type="checkbox" checked>
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                        <td class="text-center">
                                            <label class="custom_check">
                                                <input type="checkbox" checked>
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                        <td class="text-center">
                                            <label class="custom_check">
                                                <input type="checkbox" name="rememberme" class="rememberme">
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                        <td class="text-center">
                                            <label class="custom_check">
                                                <input type="checkbox" name="rememberme" class="rememberme">
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                        <td class="text-center">
                                            <label class="custom_check">
                                                <input type="checkbox" name="rememberme" class="rememberme">
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Clients</td>
                                        <td class="text-center">
                                            <label class="custom_check">
                                                <input type="checkbox" checked>
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                        <td class="text-center">
                                            <label class="custom_check">
                                                <input type="checkbox" checked>
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                        <td class="text-center">
                                            <label class="custom_check">
                                                <input type="checkbox" checked>
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                        <td class="text-center">
                                            <label class="custom_check">
                                                <input type="checkbox" name="rememberme" class="rememberme">
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                        <td class="text-center">
                                            <label class="custom_check">
                                                <input type="checkbox" name="rememberme" class="rememberme">
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                        <td class="text-center">
                                            <label class="custom_check">
                                                <input type="checkbox" name="rememberme" class="rememberme">
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Projects</td>
                                        <td class="text-center">
                                            <label class="custom_check">
                                                <input type="checkbox" checked>
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                        <td class="text-center">
                                            <label class="custom_check">
                                                <input type="checkbox" name="rememberme" class="rememberme">
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                        <td class="text-center">
                                            <label class="custom_check">
                                                <input type="checkbox" name="rememberme" class="rememberme">
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                        <td class="text-center">
                                            <label class="custom_check">
                                                <input type="checkbox" name="rememberme" class="rememberme">
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                        <td class="text-center">
                                            <label class="custom_check">
                                                <input type="checkbox" name="rememberme" class="rememberme">
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                        <td class="text-center">
                                            <label class="custom_check">
                                                <input type="checkbox" name="rememberme" class="rememberme">
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Tasks</td>
                                        <td class="text-center">
                                            <label class="custom_check">
                                                <input type="checkbox" checked>
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                        <td class="text-center">
                                            <label class="custom_check">
                                                <input type="checkbox" checked>
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                        <td class="text-center">
                                            <label class="custom_check">
                                                <input type="checkbox" checked>
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                        <td class="text-center">
                                            <label class="custom_check">
                                                <input type="checkbox" checked>
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                        <td class="text-center">
                                            <label class="custom_check">
                                                <input type="checkbox" name="rememberme" class="rememberme">
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                        <td class="text-center">
                                            <label class="custom_check">
                                                <input type="checkbox" name="rememberme" class="rememberme">
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Chats</td>
                                        <td class="text-center">
                                            <label class="custom_check">
                                                <input type="checkbox" checked>
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                        <td class="text-center">
                                            <label class="custom_check">
                                                <input type="checkbox" checked>
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                        <td class="text-center">
                                            <label class="custom_check">
                                                <input type="checkbox" checked>
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                        <td class="text-center">
                                            <label class="custom_check">
                                                <input type="checkbox" checked>
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                        <td class="text-center">
                                            <label class="custom_check">
                                                <input type="checkbox" name="rememberme" class="rememberme">
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                        <td class="text-center">
                                            <label class="custom_check">
                                                <input type="checkbox" name="rememberme" class="rememberme">
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Assets</td>
                                        <td class="text-center">
                                            <label class="custom_check">
                                                <input type="checkbox" checked>
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                        <td class="text-center">
                                            <label class="custom_check">
                                                <input type="checkbox" checked>
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                        <td class="text-center">
                                            <label class="custom_check">
                                                <input type="checkbox" checked>
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                        <td class="text-center">
                                            <label class="custom_check">
                                                <input type="checkbox" checked>
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                        <td class="text-center">
                                            <label class="custom_check">
                                                <input type="checkbox" name="rememberme" class="rememberme">
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                        <td class="text-center">
                                            <label class="custom_check">
                                                <input type="checkbox" name="rememberme" class="rememberme">
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Timing Sheets</td>
                                        <td class="text-center">
                                            <label class="custom_check">
                                                <input type="checkbox" checked>
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                        <td class="text-center">
                                            <label class="custom_check">
                                                <input type="checkbox" checked>
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                        <td class="text-center">
                                            <label class="custom_check">
                                                <input type="checkbox" checked>
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                        <td class="text-center">
                                            <label class="custom_check">
                                                <input type="checkbox" checked>
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                        <td class="text-center">
                                            <label class="custom_check">
                                                <input type="checkbox" name="rememberme" class="rememberme">
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                        <td class="text-center">
                                            <label class="custom_check">
                                                <input type="checkbox" name="rememberme" class="rememberme">
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div> -->
                        <input type="hidden" name="employee_id" id="employee_id" value="">
                        <div class="submit-section">
                            <button class="btn btn-primary submit-btn">Save</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>


    <div class="modal custom-modal fade" id="delete_employee" role="dialog">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-body">
                    <div class="form-header">
                        <h3>Delete Employee</h3>
                        <p>Are you sure want to delete?</p>
                    </div>
                    <div class="modal-btn delete-action">
                        <div class="row">
                            <div class="col-6">
                                <a href="javascript:void(0);" class="btn btn-primary continue-btn">Delete</a>
                            </div>
                            <div class="col-6">
                                <a href="javascript:void(0);" data-bs-dismiss="modal" class="btn btn-primary cancel-btn">Cancel</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<script>
    $(".edit_employee").on('click',function(){
        $('#edit_employee').modal('show');
        var employee_id = $(this).attr('id');
        $.ajax({
            url: '{% url "get_employee" %}',
            // url: '/get_employee/',
            type: 'GET',
            data: { 'employee_id': employee_id },
            success: function (data) {
                // Fill the form with employee details
                $('#first_name').val(data.first_name);
                $('#last_name').val(data.last_name);
                $('#phone').val(data.phone);
                $('#personal_email').val(data.personal_email);
                $('#employee_id').val(data.id);
                // $('#position').val(data.position);
                // Update other form fields as needed
            },
            error: function (error) {
                console.log(error);
            }
        });
        // return false;
        /*if(employee_id !=''){
            $.ajax({
                url: '{% url "get_employee" %}',
                data: { 'employee_id': employee_id },
                success: function(response) {
                    $('.staff-grid-row').html(response);
                },
                error: function(xhr, errmsg, err) {
                    console.log('Error: ' + errmsg);
                }
            });
        }else{
            alert("Please select category");
        }*/
    })
</script>
<script>
   // Find all elements with class "move_employee"
    const moveButtons = document.querySelectorAll('.move_employee');

// Add click event listener to each move button
    moveButtons.forEach(moveButton => {
    moveButton.addEventListener('click', function(event) {
        event.preventDefault(); // Prevent the default action (e.g., following the link)

        // Get the employee ID from the clicked element's ID attribute
        const employeeId = this.getAttribute('id');
        console.log('Clicked employee ID:', employeeId);

        // Find the parent profile widget of the clicked "Move" button
        const profileWidget = this.closest('.profile-widget');
        console.log('Parent profile widget:', profileWidget);

        // Example action: remove the parent profile widget from the UI
        if (profileWidget) {
            profileWidget.remove(); // Remove the parent profile widget from the DOM
        } else {
            console.log('Parent profile widget not found.');
        }
    });
});
 </script>
<script>
    // jQuery code to handle the click event for the "Move" option
$(document).ready(function() {
    $('.move_employee').click(function() {
        var employeeId = $(this).attr('id');
        // Here you can make an AJAX call to update the status of the employee to 2
        // For example:

        $.ajax({
            type: 'POST',
            url: '{% url "update_employee_status_1" %}',
            data: { id: employeeId, status: 1 },
            success: function(response) {
                // Handle success response if needed
                console.log('Employee status updated successfully.');
            },
            error: function(xhr, status, error) {
                // Handle error response if needed
                console.error('Error updating employee status:', error);
            }
        });
    });
});

</script>
<script>
$(document).ready(function() {
    $("#search-btn").click(function() {
        var selectedName = $("#name-select").val();
        var selectedCountry = $("#country-select").val();
        var selectedDesignation = $("#designation-select").val();

        if ((selectedName !== "Select Name" && selectedName !== "") || (selectedCountry !== "Select Country" && selectedCountry !== "") || (selectedDesignation !== "Select Designation" && selectedDesignation !== "")) {
            $.ajax({
                url: '{% url "search_designation" %}',
                data: {
                    name: selectedName,
                    country: selectedCountry,
                    designation: selectedDesignation
                },
                success: function(response) {
                    // Handle success response here
                    $('.staff-grid-row').html(response);
                },
                error: function(xhr, errmsg, err) {
                    console.log('Error: ' + errmsg);
                }
            });
        } else {
            alert("Please select name or designation to search");
        }
        // Check if both country and designation are selected
        if (selectedCountry !== "Select Country" && selectedDesignation !== "Select Designation") {
            $.ajax({
                url: '{% url "search_designation" %}',
                data: {
                    name: selectedName,
                    country: selectedCountry,
                    designation: selectedDesignation
                },
                success: function(response) {
                    // Handle success response here
                    $('.staff-grid-row').html(response);
                },
                error: function(xhr, errmsg, err) {
                    console.log('Error: ' + errmsg);
                }
            });
        }
    });

});
</script>


{% endblock %}
